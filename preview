<?php

namespace Preview;

require_once 'lib/reporter/default.php';
require_once 'lib/configuration.php';
require_once 'lib/world.php';
require_once 'lib/dsl/bdd.php';
require_once 'lib/loader.php';

Configuration::set_reporter(new DefaultReporter);
// Preview\Configuration::set_assertion_error();
foreach ($argv as $arg) {
    Loader::load($arg);
}

$results = World::run();

foreach($results as $result) {
    if ($result->error()) {
        exit(1);
    }
}
exit(0);
